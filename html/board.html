<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Board</title>
  <link rel="stylesheet" href="../styles/1-settings/variables.css">
  <link rel="stylesheet" href="../styles/2-base/base.css">
  <link rel="stylesheet" href="../styles/3-layout/layout.css">
  <link rel="stylesheet" href="../styles/4-components/sidebar.css">
  <link rel="stylesheet" href="../styles/4-components/topbar.css">
  <link rel="stylesheet" href="../styles/5-pages/board.css">
  <link rel="stylesheet" href="../styles/6-responsive/layout-mobile.css">
  <link rel="stylesheet" href="../styles/6-responsive/layout-tablet.css">
  <link rel="stylesheet" href="../styles/6-responsive/utilities-mobile.css">
  <link rel="stylesheet" href="../styles/add_task_overlay.css">
</head>

<body>
  <div class="layout">
    <div id="sidebar-container"></div>
    <div class="main-content">
      <div id="topbar-container"></div>
      <div class="main-section">

        <div class="find_and_create_task_container">
          <h1 class="board-headline">Board</h1>
          <div id="searchInputWrapper" class="search_input_wrapper">
            <div class="search_field_row">
              <input id="searchInput" type="text" placeholder="Find Task" oninput="onSearchInput()" />
              <div class="search_affix" onclick="focusSearchInputField()">
                <div class="separator_input_field"></div>
                <button type="button" class="search_button" onclick="focusSearchInputField(); onSearchInput()"></button>
              </div>
            </div>
            <div id="search_error" class="search_error">
              Results not found. Adjust your search.
            </div>
          </div>
          <button class="add_task_button toggle_button" onclick="openAddTaskOverlay()">
            <span class="add_task_lable">Add task</span>
            <img class="plus_sign" src="../assets/icons/plus_white.svg" />
          </button>
        </div>

        <!-- Kanban Board Spalten -->
        <div class="kanban-board">
          <!-- To do Spalte -->
          <div class="kanban-column">
            <div class="column-header">
              <h2>To do</h2>
              <button class="add-column-task-btn" onclick="openAddTaskOverlay('todo')">+</button>
            </div>
            <div class="task-list" id="todo" ondrop="drop(event)" ondragover="allowDrop(event)"
              ondragleave="removeDragOver(event)">
              <!-- Hier kommen die Tasks rein -->
            </div>
          </div>

          <!-- In progress Spalte -->
          <div class="kanban-column">
            <div class="column-header">
              <h2>In progress</h2>
              <button class="add-column-task-btn" onclick="openAddTaskOverlay('in-progress')">+</button>
            </div>
            <div class="task-list" id="in-progress" ondrop="drop(event)" ondragover="allowDrop(event)"
              ondragleave="removeDragOver(event)">
              <!-- Hier kommen die Tasks rein -->
            </div>
          </div>

          <img src="" alt="">

          <!-- Await feedback Spalte -->
          <div class="kanban-column">
            <div class="column-header">
              <h2>Await feedback</h2>
              <button class="add-column-task-btn" onclick="openAddTaskOverlay('await-feedback')">+</button>
            </div>
            <div class="task-list" id="await-feedback" ondrop="drop(event)" ondragover="allowDrop(event)"
              ondragleave="removeDragOver(event)">
              <!-- Hier kommen die Tasks rein -->
            </div>
          </div>

          <!-- Done Spalte -->
          <div class="kanban-column">
            <div class="column-header">
              <h2>Done</h2>
            </div>
            <div class="task-list" id="done" ondrop="drop(event)" ondragover="allowDrop(event)"
              ondragleave="removeDragOver(event)">
              <!-- Hier kommen die Tasks rein -->
            </div>
          </div>

          <!-- groÃŸe Karte -->
          <div id="task_overlay" class="task_overlay" onclick="event.stopPropagation()"></div>
          <div id="big-card-background" class="big-card-background" onclick="closeTaskOverlay()"></div>
          <div id="edit_task_overlay" class="edit_task_overlay task_overlay "></div>
        </div>
      </div>
    </div>
  </div>
  <div id="add-task-overlay" class="add-task-overlay" aria-hidden="true">
    <div class="add-task-backdrop" onclick="closeAddTaskOverlay()"></div>
    <div class="add-task-panel" onclick="event.stopPropagation()">
      <div id="add-task-content"></div>
    </div>
  </div>

  <script src="../js/sidebar-loader.js"></script>
  <script src="../js/topbar-loader.js"></script>
  <script src="../js/add_task_overlay.js"></script>
  <script src="../js/firebase.js"></script>
  <script src="../js/guest-data.js"></script>
  <script src="../js/board.js"></script>
  <script src="../js/template_functions/board_template.js"></script>

  <div class="big-card edit-overlay">
    <div class="edit-overlay-header">
      <img src="../assets/icons/close.svg" alt="Close" class="close-icon" onclick="closeTaskOverlay()">
    </div>

    <div class="edit-overlay-body">
      <div class="edit-title-container">
        <h3>Title</h3>
        <input id="edit-title" type="text" placeholder="Enter a title" value="${title}">
      </div>
      <div class="edit-description-container">
        <h3>Description</h3>
        <input id="edit-description" type="text" placeholder="Enter a description" value="${description}">
      </div>

      <label for="due-date">Due Date</label>
      <input type="date" id="due-date" name="due-date" value="${dueDate}" />

      <div class="form-right">
        <label>Priority</label>
        <div class="priority-options">
          <input type="radio" id="priority-urgent" name="priority" value="urgent" />
          <label for="priority-urgent" class="priority-button urgent">
            Urgent
            <img id="icon-urgent" src="../assets/icons/urgent_red.svg" />
          </label>

          <input type="radio" id="priority-medium" name="priority" value="medium" checked />
          <label for="priority-medium" class="priority-button medium">
            Medium
            <img id="icon-medium" src="../assets/icons/medium_yellow.svg" />
          </label>

          <input type="radio" id="priority-low" name="priority" value="low" />
          <label for="priority-low" class="priority-button low">
            Low
            <img id="icon-low" src="../assets/icons/low_green.svg" />
          </label>
        </div>

        <label>Assigned to</label>
        <div class="custom-multiselect">
          <div class="multiselect-header" onclick="toggleAssigneeDropdown()">
            <span id="selected-assignees-placeholder">
              Select contacts to assign
            </span>
            <img src="../assets/icons/arrow_drop_down.svg" class="dropdown-icon" />
          </div>
          <div class="multiselect-dropdown d-none" id="assignee-dropdown"></div>
          <div class="selected-assignee-avatars" id="selected-assignee-avatars"></div>
        </div>
        
        <label for="subtask">Subtasks</label>
        <div class="subtask-input-container">
          <input type="text" id="subtask" placeholder="Add new subtask" onkeydown="handleSubtaskKey(event)" />
          <button type="button" onclick="addSubtask()" class="subtask-add-btn">
            +
          </button>
        </div>
        <ul id="subtask-list"></ul>
      </div>

      <div class="edit-overlay-footer">
        <button class="save-changes" onclick="saveChanges('${id}')">Ok
          <img src="../assets/icons/check_white.svg" alt="Save" class="save-icon">
        </button>
      </div>

    </div>
  </div>
</body>

</html>